# 开发计划

## 前端

1. **基础架构搭建**
   - 初始化 Vite + Vue 3 项目结构。
   - 配置 Vue Router 与 Pinia，创建基础 Store 模块骨架。
   - 设置环境变量加载机制，区分开发与生产配置。

2. **页面骨架实现**
   - 完成 `Home`、`CreateItinerary`、`ItineraryList` 页的静态布局与路由跳转。
   - 统一导航栏、侧边栏、布局容器组件，保证主流程可浏览。

3. **核心业务流程打通**
   - 实现行程创建表单与提交逻辑，连接后端 LLM 生成接口。
   - 构建 `ItineraryDetail` 页面数据结构，展示生成结果与地图占位。

4. **数据持久化集成**
   - 接入 Supabase 或后端 API，实现行程列表、详情保存与更新。
   - 建立费用数据的增删改查流程，确保前后端同步。

5. **语音与地图功能接入**
   - 集成科大讯飞语音识别，打通录音、转写与提交到业务流程。
   - 接入高德地图，完成 POI 标记与时间线联动。

6. **扩展功能与优化**
   - 实现费用中心图表、账号登录流程与错误降级处理。
   - 进行响应式适配、交互微调与体验优化，准备发布。

## 后端

1. **项目初始化与配置**
   - 建立 FastAPI 项目骨架，配置 Poetry 或 pip requirements 管理依赖。
   - 设置分层目录结构（api/core/schemas/services），并加载环境变量与日志系统。

2. **数据库与 Supabase 集成**
   - 定义核心数据模型（用户、行程、费用、地点），对接 Supabase/PostgreSQL。
   - 实现基础 CRUD 服务与仓储层，完成数据库迁移或初始化脚本。

3. **认证与用户管理**
   - 接入 Supabase Auth 或自建 JWT 认证流程，暴露注册、登录、Token 刷新接口。
   - 设置统一鉴权依赖，保护需要登录的 API。

4. **行程与费用 API**
   - 实现行程创建、更新、获取、删除接口，集成 LLM 生成逻辑。
   - 实现费用记录 CRUD 及预算汇总接口，输出统计数据供前端图表使用。

5. **外部服务对接**
   - 封装高德地图查询与路线规划服务，提供地点搜索与路线接口。
   - 集成阿里云百炼或其他 LLM API，设计 Prompt 模板与结果校验流程。
   - 对接科大讯飞语音识别回调或轮询逻辑，统一语音处理接口。

6. **测试与可靠性**
   - 编写单元测试和集成测试，覆盖服务层与关键 API。
   - 针对外部依赖编写降级方案和模拟数据，确保接口在失败时可返回友好提示。

7. **部署与运维**
   - 配置 Dockerfile、docker-compose，确保本地与部署环境一致性。
   - 若使用 CI/CD（如 GitHub Actions），增加测试与镜像打包流程。
   - 编写运行与环境配置文档，便于课程验收。
